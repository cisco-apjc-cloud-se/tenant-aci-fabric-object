# terraform-aci-fabric-object
Terraform module to build and manage ACI Fabric policies (i.e. Fabric tab in the APIC GUI) in entirety from a single HCL/JSON/YAML object variable file.  This should simplify fabric configuration and allow for easier configuration changes and rollbacks.  

Please also see the related module [terraform-aci-tenant-object](https://github.com/cisco-apjc-cloud-se/terraform-aci-tenant-object) for building and managing logical ACI Tenant configuration (in entirety) from a single HCL/JSON/YAML object variable file.

This module also supports re-using existing configuration through an optional `use_existing` parameter at most levels.  This allows Terraform to manage child objects without fully managing the parent object (i.e. Terraform can add new interface profiles to an existing switch profile without disturbing existing configuration).  

Please see this link for examples of how this module is used.
[ACI Fabric Management Example](https://github.com/cisco-apjc-cloud-se/aci-fabric-example)

The input variable object for this module is structured on the ACI Fabric tab (ACI 5.2+).  The following configuration items are supported.

- Inventory
  - Pod
    - Fabric Membership
    - Leaf
      - Interface Blacklist
- Fabric Policies
  - Interface
    - Layer 3 Interface Policies
  - Monitoring
    - Fabric Node Control Policies
- Access Policies
  - Domains
    - Physical Domains
    - Layer 3 Domains
    - Fibre Channel Domains
  - Interfaces
    - Leaf
      - Policy Groups
        - Leaf Access Bundles (PC/vPC Interfaces)
        - Leaf Access Ports (Eth Interfaces)
        - Leaf Breakout Ports
      - Profiles
        - FEX Profiles
        - Leaf Interface Profiles
    - Spine
      - Policy Groups
        - Spine Ports
      - Profiles
        - Spine Interface Profiles
  - Policies
    - Global
      - Attached Access Entity Profiles (AAEP)
      - Error Disable Recovery Policy
      - MCP Instance Policy
      - QoS Class Policy
    - Interface
      - CDP Interface Policies
      - Fibre Channel Interface Policies
      - Layer 2 Interface Policies
      - Link Level Interface Policies
      - LLDP Interface Policies
      - MCP Interface Policies
      - Port Channel (LACP) Policies
      - Port Security Policies
      - Spanning Tree Interface Policies
    - Switch
      - VPC Domain Policies
      - VPC Explicit Protection Groups
  - Pools
    - VLAN Pools
    - VSAN Pools
  - Switches
    - Leaf
      - Policy Groups
        - Access Switch
      - Profiles
        - Leaf Profiles
    - Spine
      - Policy Groups
        - Spine Switch
      - Profiles
        - Spine Profiles

For any additonal requests, please raise an enhancement request within the GitHub repository.

<!-- BEGIN_TF_DOCS -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_aci"></a> [aci](#requirement\_aci) | >=2.0.0 |

## Providers

No providers.

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_access_policies"></a> [access\_policies](#module\_access\_policies) | ./modules/access_policies | n/a |
| <a name="module_fabric_policies"></a> [fabric\_policies](#module\_fabric\_policies) | ./modules/fabric_policies | n/a |
| <a name="module_inventory"></a> [inventory](#module\_inventory) | ./modules/inventory | n/a |

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_fabric"></a> [fabric](#input\_fabric) | # New Single-Object Fabric Model ## | <pre>object({<br>    # name          = string<br>    # use_existing  = optional(bool)<br>    # description   = optional(string)<br>    ### Fabric Configuration Policies ###<br>    fabric_policies = object({<br>      policies = object({<br>        interface = object({<br>          l3_interface_policies = map(object({<br>            name        = string # (Required) Name of object L3 Interface Policy.<br>            annotation  = optional(string) # (Optional) Annotation for object L3 Interface Policy.<br>            bfd_isis    = optional(string) # (Optional) BFD ISIS Configuration for object L3 Interface Policy. Allowed values are "disabled" and "enabled". Default value is "disabled".<br>            name_alias  = optional(string) # (Optional) Name alias for object L3 Interface Policy.<br>            description = optional(string) # (Optional) Description for object L3 Interface Policy.<br>          }))<br>        })<br>        monitoring = object({<br>          fabric_node_control_policies = map(object({<br>            name        = string # (Required) Name of object Fabric Node Control.<br>            annotation  = optional(string) # (Optional) Annotation of object Fabric Node Control.<br>            control     = optional(string) # (Optional) Fabric node control bitmask of object Fabric Node Control. Allowed values are "Dom" and "None". Default value is "None".<br>            feature_sel = optional(string) # (Optional) Feature Selection of object Fabric Node Control. Allowed values are "analytics", "netflow" and "telemetry". Default value is "telemetry".<br>            description = optional(string) # (Optional) Description of object Fabric Node Control.<br>            name_alias  = optional(string) # (Optional) Name Alias of object Fabric Node Control.<br>          }))<br>        })<br>      })<br>    })<br>    ### Fabric Access Policies ###<br>    access_policies = object({<br>      domains = object({<br>        fc_domains = map(object({<br>          name        = string<br>          annotation  = optional(string)<br>          name_alias  = optional(string)<br>          vsan_pool  = object({<br>            use_existing  = optional(bool)<br>            name          = string<br>            alloc_mode    = optional(string)<br>          })<br>          vlan_pool  = object({<br>            use_existing  = optional(bool)<br>            name          = string<br>            alloc_mode    = optional(string)<br>          })<br>        }))<br>        l3_domains = map(object({<br>          name        = string<br>          annotation  = optional(string)<br>          name_alias  = optional(string)<br>          vlan_pool  = object({<br>            use_existing  = optional(bool)<br>            name          = string<br>            alloc_mode    = optional(string)<br>          })<br>        }))<br>        physical_domains = map(object({<br>          name        = string<br>          annotation  = optional(string)<br>          name_alias  = optional(string)<br>          vlan_pool  = object({<br>            use_existing  = optional(bool)<br>            name          = string<br>            alloc_mode    = optional(string)<br>          })<br>        }))<br>      })<br>      interfaces = object({<br>        leaf = object({<br>          policy_groups = object({<br>            leaf_access_bundles = map(object({<br>              name                    = string<br>              description             = optional(string)<br>              lag_t                   = optional(string) # The bundled ports group link aggregation type: port channel vs virtual port channel. Allowed values are "not-aggregated", "node" and "link". Default is "link".<br>              annotation              = optional(string)<br>              name_alias              = optional(string)<br>              aaep_profile = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              link_level_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              lldp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              cdp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              mcp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              l2_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              fc_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              stp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              port_sec_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              pc_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>            }))<br>            leaf_access_ports = map(object({<br>              name                    = string<br>              description             = optional(string)<br>              annotation              = optional(string)<br>              name_alias              = optional(string)<br>              aaep_profile = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              link_level_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              lldp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              cdp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              mcp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              l2_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              fc_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              stp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              port_sec_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>            }))<br>            leaf_breakout_ports = map(object({<br>              name        = string # (Required) Name of leaf breakout port group object.<br>              annotation  = optional(string) # (Optional) Annotation for leaf breakout port group object.<br>              brkout_map  = string # (Optional) Breakout map for leaf breakout port group object. Allowed values are "100g-2x", "100g-4x", "10g-4x", "25g-4x", "50g-8x" and "none". Default value is "none".<br>              name_alias  = optional(string) # (Optional) Name alias for leaf breakout port group object.<br>              description = optional(string) # (Optional) Description for leaf breakout port group object.<br>            }))<br>          })<br>          profiles = object({<br>            fex_profiles = map(object({<br>              name          = string # (Required) The FEX profile name.<br>              use_existing  = optional(bool)<br>              annotation    = optional(string) # (Optional) Specifies the annotation of the FEX profile name.<br>              description   = optional(string) # (Optional) Specifies the description of the FEX profile name.<br>              name_alias    = optional(string) # (Optional) Specifies the alias name of the FEX profile name.<br>              port_selectors = map(object({<br>                name                      = string # (Required) Name of Object Access Port Selector.<br>                use_existing              = optional(bool)<br>                access_port_selector_type = string # (Required) The host port selector type. Allowed values are "ALL" and "range". Default is "ALL".<br>                annotation                = optional(string) # (Optional) Annotation for object Access Port Selector.<br>                description               = optional(string) # (Optional) Description for object Access Port Selector.<br>                name_alias                = optional(string) # (Optional) Name alias for object Access Port Selector.<br>                policy_group              = object({<br>                  use_existing = optional(bool)<br>                  name = optional(string) # Interface Policy Group Name<br>                  type = optional(string) # "port", "bundle"<br>                })<br>                port_blocks = map(object({<br>                  name        = string # (Optional) name of Object Access Port Block.<br>                  annotation  = optional(string) # (Optional) Annotation for object Access Port Block.<br>                  description = optional(string) # (Optional) Description for object Access Port Block.<br>                  from_card   = number # (Optional) The beginning (from-range) of the card range block for the leaf access port block. Allowed value range is 1-100. Default value is "1".<br>                  from_port   = number # (Optional) The beginning (from-range) of the port range block for the leaf access port block. Allowed value range is 1-127. Default value is "1".<br>                  name_alias  = optional(string) # (Optional) Name alias for object Access Port Block.<br>                  to_card     = number # (Optional) The end (to-range) of the card range block for the leaf access port block. Allowed value range is 1-100. Default value is "1".<br>                  to_port     = number # (Optional) The end (to-range) of the port range block for the leaf access port block. Allowed value range is 1-127. Default value is "1".<br>                }))<br>                sub_port_blocks = map(object({<br>                  name          = string # (Required) Name of Object access sub port block.<br>                  annotation    = optional(string) # (Optional) Annotation for object access sub port block.<br>                  description   = optional(string) # (Optional) Description for object access sub port block.<br>                  from_card     = number # (Optional) From card. Allowed Values are between 1 to 100. Default Value is "1".<br>                  from_port     = number # (Optional) Port block from port Allowed Values are between 1 to 127. Default Value is "1".<br>                  from_sub_port = number # (Optional) From sub port for object access sub port block. Allowed Values are between 1 to 64. Default Value is "1".<br>                  name_alias    = optional(string) # (Optional) Name alias for object access sub port block.<br>                  to_card       = number # (Optional) To card. Allowed Values are between 1 to 100. Default Value is "1".<br>                  to_port       = number # (Optional) To port. Allowed Values are between 1 to 127. Default Value is "1".<br>                  to_sub_port   = number # (Optional) To sub port for object access sub port block. Allowed Values are between 1 to 64. Default Value is "1".<br>                }))<br>              }))<br>            }))<br>            interface_profiles = map(object({<br>              name          = string # (Required) Name of Object leaf interface profile.<br>              use_existing  = optional(bool)<br>              description   = optional(string) # (Optional) Description for object leaf interface profile.<br>              annotation    = optional(string) # (Optional) Annotation for object leaf interface profile.<br>              name_alias    = optional(string) # (Optional) Name alias for object leaf interface profile.<br>              port_selectors = map(object({<br>                name                      = string # (Required) Name of Object Access Port Selector.<br>                use_existing              = optional(bool)<br>                access_port_selector_type = string # (Required) The host port selector type. Allowed values are "ALL" and "range". Default is "ALL".<br>                annotation                = optional(string) # (Optional) Annotation for object Access Port Selector.<br>                description               = optional(string) # (Optional) Description for object Access Port Selector.<br>                name_alias                = optional(string) # (Optional) Name alias for object Access Port Selector.<br>                policy_group              = object({<br>                  use_existing = optional(bool)<br>                  name = optional(string) # Interface Policy Group Name<br>                  type = optional(string) # "port", "bundle"<br>                })<br>                port_blocks = map(object({<br>                  name        = string # (Optional) name of Object Access Port Block.<br>                  annotation  = optional(string) # (Optional) Annotation for object Access Port Block.<br>                  description = optional(string) # (Optional) Description for object Access Port Block.<br>                  from_card   = number # (Optional) The beginning (from-range) of the card range block for the leaf access port block. Allowed value range is 1-100. Default value is "1".<br>                  from_port   = number # (Optional) The beginning (from-range) of the port range block for the leaf access port block. Allowed value range is 1-127. Default value is "1".<br>                  name_alias  = optional(string) # (Optional) Name alias for object Access Port Block.<br>                  to_card     = number # (Optional) The end (to-range) of the card range block for the leaf access port block. Allowed value range is 1-100. Default value is "1".<br>                  to_port     = number # (Optional) The end (to-range) of the port range block for the leaf access port block. Allowed value range is 1-127. Default value is "1".<br>                }))<br>                sub_port_blocks = map(object({<br>                  name          = string # (Required) Name of Object access sub port block.<br>                  annotation    = optional(string) # (Optional) Annotation for object access sub port block.<br>                  description   = optional(string) # (Optional) Description for object access sub port block.<br>                  from_card     = number # (Optional) From card. Allowed Values are between 1 to 100. Default Value is "1".<br>                  from_port     = number # (Optional) Port block from port Allowed Values are between 1 to 127. Default Value is "1".<br>                  from_sub_port = number # (Optional) From sub port for object access sub port block. Allowed Values are between 1 to 64. Default Value is "1".<br>                  name_alias    = optional(string) # (Optional) Name alias for object access sub port block.<br>                  to_card       = number # (Optional) To card. Allowed Values are between 1 to 100. Default Value is "1".<br>                  to_port       = number # (Optional) To port. Allowed Values are between 1 to 127. Default Value is "1".<br>                  to_sub_port   = number # (Optional) To sub port for object access sub port block. Allowed Values are between 1 to 64. Default Value is "1".<br>                }))<br>              }))<br>            }))<br>          })<br>        })<br>        spine = object({<br>          policy_groups = object({<br>            spine_ports = map(object({<br>              name                    = string<br>              description             = optional(string)<br>              annotation              = optional(string)<br>              name_alias              = optional(string)<br>              aaep_profile = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              link_level_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              cdp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>            }))<br>          })<br>          profiles = object({<br>            interface_profiles = map(object({<br>              name          = string # (Required) Name of Object spine interface profile.<br>              use_existing  = optional(bool)<br>              description   = optional(string) # (Optional) Description for object spine interface profile.<br>              annotation    = optional(string) # (Optional) Annotation for object spine interface profile.<br>              name_alias    = optional(string) # (Optional) Name alias for object spine interface profile.<br>              port_selectors = map(object({<br>                name                            = string # (Required) Name of Object Access Port Selector.<br>                use_existing                    = optional(bool)<br>                spine_access_port_selector_type = optional(string) # (Required) The host port selector type. Allowed values are "ALL" and "range". Default is "ALL".<br>                annotation                      = optional(string) # (Optional) Annotation for object Access Port Selector.<br>                description                     = optional(string) # (Optional) Description for object Access Port Selector.<br>                name_alias                      = optional(string) # (Optional) Name alias for object Access Port Selector.<br>                policy_group                    = object({<br>                  use_existing  = optional(bool)<br>                  name          = optional(string) # Interface Policy Group Name<br>                })<br>                port_blocks = map(object({<br>                  name        = string # (Optional) name of Object Access Port Block.<br>                  annotation  = optional(string) # (Optional) Annotation for object Access Port Block.<br>                  description = optional(string) # (Optional) Description for object Access Port Block.<br>                  from_card   = number # (Optional) The beginning (from-range) of the card range block for the leaf access port block. Allowed value range is 1-100. Default value is "1".<br>                  from_port   = number # (Optional) The beginning (from-range) of the port range block for the leaf access port block. Allowed value range is 1-127. Default value is "1".<br>                  name_alias  = optional(string) # (Optional) Name alias for object Access Port Block.<br>                  to_card     = number # (Optional) The end (to-range) of the card range block for the leaf access port block. Allowed value range is 1-100. Default value is "1".<br>                  to_port     = number # (Optional) The end (to-range) of the port range block for the leaf access port block. Allowed value range is 1-127. Default value is "1".<br>                }))<br>              }))<br>            }))<br>          })<br>        })<br>      })<br>      policies = object({<br>        global = object({<br>          aaeps = map(object({<br>            name                = string<br>            use_existing        = optional(bool)<br>            description         = optional(string)<br>            annotation          = optional(string)<br>            name_alias          = optional(string)<br>            enable_infra_vlan   = bool<br>            associated_domains  = map(object({<br>              use_existing  = optional(bool)<br>              name          = string<br>              type          = optional(string)<br>            }))<br>          }))<br>          qos_class = optional(object({<br>            name_alias            = optional(string) # "qos_instance_alias"<br>            description           = optional(string) # "From Terraform"<br>            etrap_age_timer       = optional(number) # "0"<br>            etrap_bw_thresh       = optional(number) # "0"<br>            etrap_byte_ct         = optional(number) # "0"<br>            etrap_st              = optional(string) # "no"<br>            fabric_flush_interval = optional(number) # "500"<br>            fabric_flush_st       = optional(string) # "no"<br>            annotation            = optional(string) # "orchestrator:terraform"<br>            ctrl                  = optional(string) # "none"<br>            uburst_spine_queues   = optional(number) # "10"<br>            uburst_tor_queues     = optional(number) # "10"<br>          }))<br>          error_disable_recovery = optional(object({<br>            annotation          = optional(string)<br>            err_dis_recov_intvl = optional(number)<br>            name_alias          = optional(string)<br>            description         = optional(string)<br>            event-bpduguard     = optional(string)<br>            event-ep-move       = optional(string)<br>            event-mcp-loop      = optional(string)<br>          }))<br>          mcp_instance = optional(object({<br>            annotation        = optional(string) # (Optional) Annotation of object MCP Instance Policy.<br>            admin_st          = optional(string) # (Optional) Admin State. The administrative state of the object or policy. Allowed values are "disabled", "enabled". Type: String.<br>            description       = optional(string) # (Optional) Description for object MCP Instance Policy. Type: String.<br>            name_alias        = optional(string) # (Optional) Name Alias for object MCP Instance Policy. Type: String.<br>            ctrl              = optional(list(string)) # (Optional) Controls. The control state. Allowed values are "pdu-per-vlan", "stateful-ha". Type: List.<br>            init_delay_time   = optional(number) # (Optional) Init Delay Time. Allowed range is "0"-"1800". Type: String.<br>            key               = string # (Required) Secret Key. The key or password used to uniquely identify this configuration object.<br>            loop_detect_mult  = optional(number) # (Optional) Loop Detection Multiplier. Allowed range is "1"-"255". Type: String.<br>            loop_protect_act  = optional(string) # (Optional) Loop Protection Action. Allowed values are "port-disable","none". Type: String.<br>            tx_freq           = optional(number) # (Optional) Transmission Frequency. Sets the transmission frequency of the instance advertisements. Allowed range is "0"-"300". Type: String.(Note: For value less than "2", loop_protect_act attribute needs to be "port-disable", Accepted Range of tx_freq is 100ms to 300s so total value of tx_freq & tx_freq_msec should in Accepted range.)<br>            tx_freq_msec      = optional(number) # (Optional) Transmission Frequency. Sets the transmission frequency of mcp advertisements in milliseconds Allowed range is "0"-"999". Type: String.(Note: For value "0" of tx_freq, range of tx_freq_msec is "100"-"999".)<br>          }))<br>        })<br>        interface = object({<br>          cdp_policies = map(object({<br>            name        = string # (Required) Name of Object cdp interface policy.<br>            admin_st    = optional(string) # (Optional) Administrative state. Allowed values: "enabled", "disabled". Default value is "enabled".<br>            annotation  = optional(string) # (Optional) Annotation for object cdp interface policy.<br>            name_alias  = optional(string) # (Optional) Name alias for object cdp interface policy.<br>            description = optional(string) # (Optional) Description for object cdp interface policy.<br>          }))<br>          fc_policies = map(object({<br>            name          = string # (Required) Name of Object interface FC policy.<br>            annotation    = optional(string) # (Optional) Annotation for object interface FC policy.<br>            description   = optional(string) # (Optional) Description for object interface FC policy.<br>            automaxspeed  = optional(string) # (Optional) Auto-max-speed for object interface FC policy. Allowed values are "2G", "4G", "8G", "16G" and "32G". Default value is "32G".<br>            fill_pattern  = optional(string) # (Optional) Fill Pattern for native FC ports. Allowed values are "ARBFF" and "IDLE". Default is "IDLE".<br>            name_alias    = optional(string) # (Optional) Name alias for object Interface FC policy.<br>            port_mode     = optional(string) # (Optional) In which mode Ports should be used. Allowed values are "f" and "np". Default is "f".<br>            rx_bb_credit  = optional(number) # (Optional) Receive buffer credits for native FC ports Range:(16 - 64). Default value is "64".<br>            speed         = optional(string) # (Optional) CPU or port speed. All the supported values are "unknown", "auto", "4G", "8G", "16G", "32G". Default value is "auto".<br>            trunk_mode    = optional(string) # (Optional) Trunking on/off for native FC ports. Allowed values are "un-init", "trunk-off", "trunk-on" and "auto". Default value is "trunk-off".<br>          }))<br>          l2_policies = map(object({<br>            name        = string # (Required) Name of Object L2 interface policy.<br>            annotation  = optional(string) # (Optional) Annotation for object L2 interface policy.<br>            description = optional(string) # (Optional) Description for object L2 interface policy.<br>            name_alias  = optional(string) # (Optional) Name alias for object L2 interface policy.<br>            qinq        = optional(string) # (Optional) Determines if QinQ is disabled or if the port should be considered a core or edge port. Allowed values are "disabled", "edgePort", "corePort" and "doubleQtagPort". Default is "disabled".<br>            vepa        = optional(string) # (Optional) Determines if Virtual Ethernet Port Aggregator is disabled or enabled. Allowed values are "disabled" and "enabled". Default is "disabled".<br>            vlan_scope  = optional(string) # (Optional) The scope of the VLAN. Allowed values are "global" and "portlocal". Default is "global".<br>          }))<br>          link_level_policies = map(object({<br>            name          = string # (Required) Name of object fabric if pol.<br>            annotation    = optional(string) # (Optional) Annotation for object fabric if pol.<br>            description   = optional(string) # (Optional) Description for object fabric if pol.<br>            auto_neg      = optional(string) # (Optional) Policy auto negotiation for object fabric if pol. Allowed values: "on", "off". Default value is "on".<br>            fec_mode      = optional(string) # (Optional) Forwarding error correction for object fabric if pol. Allowed values: "inherit", "cl91-rs-fec", "cl74-fc-fec", "ieee-rs-fec", "cons16-rs-fec", "kp-fec", "disable-fec". Default value is "inherit".<br>            link_debounce = optional(number) # (Optional) Link debounce interval for object fabric if pol. Range of allowed values: "0" to "5000". Default value is "100".<br>            name_alias    = optional(string) # (Optional) Name alias for object fabric if pol.<br>            speed         = optional(string) # (Optional) Port speed for object fabric if pol. Allowed values: "unknown", "100M", "1G", "10G", "25G", "40G", "50G", "100G","200G", "400G", "inherit". Default value is "inherit".<br>          }))<br>          lldp_policies = map(object({<br>            name        = string # (Required) Name of Object LLDP Interface Policy.<br>            admin_rx_st = optional(string) # (Optional) Admin receive state. Allowed values are "enabled" and "disabled". Default value is "enabled".<br>            admin_tx_st = optional(string) # (Optional) Admin transmit state. Allowed values are "enabled" and "disabled". Default value is "enabled".<br>            description = optional(string) # (Optional) Description for object LLDP Interface Policy.<br>            annotation  = optional(string) # (Optional) Annotation for object LLDP Interface Policy.<br>            name_alias  = optional(string) # (Optional) Name alias for object LLDP Interface Policy.<br>          }))<br>          mcp_policies = map(object({<br>            name        = string # (Required) Name of Object miscabling protocol interface policy.<br>            admin_st    = optional(string) # (Optional) Administrative state of the object or policy. Allowed values are "enabled" and "disabled". Default is "enabled".<br>            description = optional(string) # (Optional) Description for object miscabling protocol interface policy.<br>            annotation  = optional(string) # (Optional) Annotation for object miscabling protocol interface policy.<br>            name_alias  = optional(string) # (Optional) Name alias for object miscabling protocol interface policy.<br>          }))<br>          pc_policies = map(object({<br>            name        = string # (Required) Name of Object LACP Policy.<br>            description = optional(string) # (Optional) Description for object LACP Policy.<br>            annotation  = optional(string) # (Optional) Annotation for object LACP Policy.<br>            ctrl        = optional(list(string)) # (Optional) List of LAG control properties. Allowed values are "symmetric-hash", "susp-individual", "graceful-conv", "load-defer" and "fast-sel-hot-stdby". default value is ["fast-sel-hot-stdby", "graceful-conv", "susp-individual"]<br>            max_links   = optional(number) # (Optional) Maximum number of links. Allowed value range is "1" - "16". Default is "16".<br>            min_links   = optional(number) # (Optional) Minimum number of links in port channel. Allowed value range is "1" - "16". Default is "1".<br>            mode        = optional(string) # (Optional) policy mode. Allowed values are "off", "active", "passive", "mac-pin" and "mac-pin-nicload". Default is "off".<br>            name_alias  = optional(string) # (Optional) Name alias for object LACP Policy.<br>          }))<br>          port_security_policies = map(object({<br>            name        = string # (Required) Name of Object port security policy.<br>            description = optional(string) # (Optional) Description for object port security policy.<br>            annotation  = optional(string) # (Optional) Annotation for object port security policy.<br>            maximum     = optional(number) # (Optional) Port Security Maximum. Allowed value range is "0" - "12000". Default is "0".<br>            name_alias  = optional(string) # (Optional) Name alias for object port security policy.<br>            timeout     = optional(number) # (Optional) Amount of time between authentication attempts. Allowed value range is "60" - "3600". Default is "60".<br>            violation   = optional(string) # (Optional) Port Security Violation. default value is "protect". Allowed value: "protect"<br>          }))<br>          stp_policies = map(object({<br>            name        = string # (Required) Name of object Spanning Tree Interface Policy.<br>            annotation  = optional(string) # (Optional) Annotation of object Spanning Tree Interface Policy.<br>            name_alias  = optional(string) # (Optional) Name alias of object Spanning Tree Interface Policy.<br>            description = optional(string) # (Optional) Description of object Spanning Tree Interface Policy.<br>            ctrl        = optional(list(string)) # (Optional) Interface controls. Allowed values are "bpdu-filter", "bpdu-guard", "unspecified". The default value is "unspecified". Unspecified value should not be added along with other allowed values. Type: List.<br>          }))<br>        })<br>        switch = object({<br>          vpc_domains = map(object({<br>            name        = string # (Required) Name of object VPC Domain Policy.<br>            annotation  = optional(string) # (Optional) Annotation of object VPC Domain Policy.<br>            dead_intvl  = optional(string) # (Optional) The VPC peer dead interval time of object VPC Domain Policy. Range: "5" - "600". Default value is "200".<br>            name_alias  = optional(string) # (Optional) Name Alias of object VPC Domain Policy.<br>            description = optional(string) # (Optional) Description of object VPC Domain Policy.<br>          }))<br>          vpc_protection_groups = map(object({<br>            name                              = string # (Required) Name of Object VPC Explicit Protection Group.<br>            switch1                           = number # (Required) Node Id of switch 1 to attach.<br>            switch2                           = number # (Required) Node Id of switch 2 to attach.<br>            annotation                        = optional(string) # (Optional) Annotation for object VPC Explicit Protection Group.<br>            vpc_domain_policy                 = optional(string) # (Optional) VPC domain policy name.<br>            vpc_explicit_protection_group_id  = optional(number) # (Optional) Explicit protection group ID. Integer values are allowed between 1-1000. default value is "0".<br>          }))<br>        })<br>      })<br>      pools = object({<br>        vlan_pools = map(object({<br>          name          = string<br>          use_existing  = optional(bool)<br>          description   = optional(string)<br>          alloc_mode    = string # Allocation mode for object vlan_pool. Allowed values: "dynamic", "static"<br>          annotation    = optional(string)<br>          name_alias    = optional(string)<br>          ranges = map(object({<br>            description   = optional(string)<br>            from          = number<br>            to            = number<br>            alloc_mode    = optional(string) # Alloc mode for object VLAN Pool ranges. Allowed values: "dynamic", "static", "inherit". Default is "inherit".<br>            annotation    = optional(string)<br>            name_alias    = optional(string)<br>            role          = optional(string) # System role type. Allowed values: "external", "internal". Default is "external".<br>          }))<br>        }))<br>        vsan_pools = map(object({<br>          name          = string<br>          use_existing  = optional(bool)<br>          description   = optional(string)<br>          alloc_mode    = optional(string) # Allocation mode for object vsan_pool. Allowed values: "static"<br>          annotation    = optional(string)<br>          name_alias    = optional(string)<br>          ranges = map(object({<br>            description   = optional(string)<br>            from          = number<br>            to            = number<br>            alloc_mode    = optional(string) # Alloc mode for object VSAN Pool ranges. Allowed values: "static", "inherit". Default is "inherit".<br>            annotation    = optional(string)<br>            name_alias    = optional(string)<br>            role          = optional(string) # System role type. Allowed values: "external", "internal". Default is "external".<br>          }))<br>        }))<br>      })<br>      switches = object({<br>        leaf = object({<br>          policy_groups = object({<br>            access_switches = map(object({<br>              name          = string # (Required) Name of object Access Switch Policy Group.<br>              use_existing  = optional(bool)<br>              annotation    = optional(string) # (Optional) Annotation of object Access Switch Policy Group.<br>              name_alias    = optional(string) # (Optional) Name alias for object Access Switch Policy Group.<br>              description   = optional(string) # (Optional) Description for object Access Switch Policy Group.<br>            }))<br>          })<br>          profiles = object({<br>            leaf_profiles = map(object({<br>              name                = string # (Required) Name of Object leaf profile.<br>              use_existing        = optional(bool)<br>              description         = optional(string) # (Optional) Description for object leaf profile.<br>              annotation          = optional(string) # (Optional) Annotation for object leaf profile.<br>              name_alias          = optional(string) # (Optional) Name alias for object leaf profile.<br>              leaf_selectors  = map(object({<br>                name                    = string # (Required) Name of Object switch association.<br>                use_existing            = optional(bool)<br>                switch_association_type = string # (Required) The leaf selector type. Allowed values: "ALL", "range", "ALL_IN_POD".<br>                annotation              = optional(string) # (Optional) Annotation for object switch association.<br>                description             = optional(string) # (Optional) Description for object switch association.<br>                name_alias              = optional(string) # (Optional) Name alias for object switch association.<br>                policy_group            = object({<br>                  use_existing  = optional(bool)<br>                  name          = optional(string)<br>                  })<br>                node_blocks = map(object({<br>                  name        = string # (Required) Name of Object node block.<br>                  annotation  = optional(string) # (Optional) Annotation for object node block.<br>                  description = optional(string) # (Optional) Description for object node block.<br>                  from_node   = number # (Optional) From Node ID. Range from 1 to 16000. Default value is "1".<br>                  name_alias  = optional(string) # (Optional) Name alias for object node block.<br>                  to_node     = number # (Optional) To node ID. Range from 1 to 16000. Default value is "1".<br>                }))<br>              }))<br>              interface_profiles  = map(object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>                type          = optional(string) # "leaf_interface_profile", "fex_profile"<br>              }))<br>            }))<br>          })<br>        })<br>        spine = object({<br>          policy_groups = object({<br>            spine_switches = map(object({<br>              name                  = string # (Required) Name of object Spine Switch Policy Group.<br>              annotation            = optional(string) # (Optional) Annotation of object Spine Switch Policy Group.<br>              name_alias            = optional(string) # (Optional) Name alias for object Spine Switch Policy Group.<br>              description           = optional(string) # (Optional) Description for object Spine Switch Policy Group.<br>              lldp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>              cdp_intf_policy = object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              })<br>            }))<br>          })<br>          profiles = object({<br>            spine_profiles = map(object({<br>              name          = string # (Required) Name of Object Spine Profile.<br>              use_existing  = optional(bool)<br>              description   = optional(string) # (Optional) Description for object Spine Profile.<br>              annotation    = optional(string) # (Optional) Annotation for object Spine Profile.<br>              name_alias    = optional(string) # (Optional) Name alias for object Spine Profile.<br>              spine_selectors = map(object({<br>                name                          = string # (Required) Name of Object Spine Switch association.<br>                use_existing                  = optional(bool)<br>                spine_switch_association_type = string # (Required) Spine association type of Object Spine Switch Association. Allowed values: "ALL", "range", "ALL_IN_POD"<br>                description                   = optional(string) # (Optional) Description for object Spine Switch Association.<br>                annotation                    = optional(string) # (Optional) Annotation for object Spine Switch Association.<br>                name_alias                    = optional(string) # (Optional) Name alias for object Spine Switch Association.<br>                policy_group                  = object({<br>                  use_existing  = optional(bool)<br>                  name          = optional(string)<br>                })<br>                node_blocks = map(object({<br>                  name        = string # (Required) Name of Object node block.<br>                  annotation  = optional(string) # (Optional) Annotation for object node block.<br>                  description = optional(string) # (Optional) Description for object node block.<br>                  from_       = optional(number) # (Optional) From Node ID. Range from 1 to 16000. Default value is "1".<br>                  name_alias  = optional(string) # (Optional) Name alias for object node block.<br>                  to_         = optional(number) # (Optional) To node ID. Range from 1 to 16000. Default value is "1".<br>                }))<br>              }))<br>              interface_profiles = map(object({<br>                use_existing  = optional(bool)<br>                name          = optional(string)<br>              }))<br>            }))<br>          })<br>        })<br>      })<br>    })<br>    ### Fabric Inventory Policies ###<br>    inventory = object({<br>      pods = map(object({<br>        pod_id        = number<br>        leaf_switches = map(object({<br>          node_id             = number<br>          interface_blacklist = optional(list(string))<br>        }))<br>        fabric_members = map(object({<br>          serial      = string # (Required) Serial Number for the new Fabric Node Member.<br>          name        = string # (Required) Name of Fabric Node member.<br>          annotation  = optional(string) # (Optional) Specifies the annotation of a Fabric Node member.<br>          description = optional(string) # (Optional) Specifies the description of a Fabric Node member.<br>          ext_pool_id = optional(number) # (Optional) external pool ID for object Fabric Node member. Default value: "0".<br>          fabric_id   = optional(number) # (Optional) Fabric ID for the new Fabric Node Member. Default value: "1".<br>          name_alias  = optional(string) # (Optional) Name alias for object Fabric Node member.<br>          node_id     = number # (Optional) Node ID Number for the new Fabric Node Member. Allowed value range: "101" - "4000". Default value: "0".<br>          node_type   = optional(string) # (Optional) Node type for object Fabric Node member. Allowed values: "unspecified", "remote-leaf-wan". Default value: "unspecified".<br>          role        = string # (Optional) Role for the new Fabric Node Member. Allowed values: "unspecified", "leaf", "spine". Default value: "unspecified"<br>        }))<br>      }))<br>    })<br>  })</pre> | n/a | yes |

## Outputs

No outputs.
<!-- END_TF_DOCS -->
